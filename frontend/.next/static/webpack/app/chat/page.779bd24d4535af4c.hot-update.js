"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/chat/page",{

/***/ "(app-pages-browser)/./app/chat/page.tsx":
/*!***************************!*\
  !*** ./app/chat/page.tsx ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var _components_chat_chat_container__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/components/chat/chat-container */ \"(app-pages-browser)/./components/chat/chat-container.tsx\");\n/* harmony import */ var _hooks_useInvestmentValidation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/hooks/useInvestmentValidation */ \"(app-pages-browser)/./hooks/useInvestmentValidation.ts\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\nfunction ChatPage() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_4__.Suspense, {\n        fallback: null,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ChatPageContent, {}, void 0, false, {\n            fileName: \"D:\\\\Python\\\\AI_MCP_A2A\\\\frontend\\\\app\\\\chat\\\\page.tsx\",\n            lineNumber: 42,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"D:\\\\Python\\\\AI_MCP_A2A\\\\frontend\\\\app\\\\chat\\\\page.tsx\",\n        lineNumber: 41,\n        columnNumber: 5\n    }, this);\n}\n_c = ChatPage;\nfunction ChatPageContent() {\n    _s();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)('');\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n    const [sessionId, setSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null);\n    const isSendingRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(false);\n    const { validateQuestion } = (0,_hooks_useInvestmentValidation__WEBPACK_IMPORTED_MODULE_2__.useInvestmentValidation)();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    const searchParams = (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useSearchParams)();\n    // URL 파라미터에서 초기 질문 가져오기 및 자동 실행\n    (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{\n        const initialQuestion = searchParams.get('q');\n        if (initialQuestion && !isLoading && messages.length === 0) {\n            const question = decodeURIComponent(initialQuestion);\n            setInput(question);\n            // 자동으로 질문 실행\n            setTimeout(()=>{\n                handleAutoSend(question);\n            }, 100);\n        }\n    }, [\n        searchParams,\n        isLoading,\n        messages.length\n    ]);\n    // 자동 질문 실행 함수\n    const handleAutoSend = async (question)=>{\n        if (!question.trim() || isLoading || isSendingRef.current) return;\n        isSendingRef.current = true;\n        const inputText = question.trim();\n        // 먼저 투자 관련 질문인지 검증\n        const validationResult = await validateQuestion(inputText);\n        const isInvestmentRelated = validationResult.is_investment_related;\n        const userMessage = {\n            id: Date.now().toString(),\n            type: 'user',\n            content: inputText,\n            timestamp: new Date(),\n            status: 'success'\n        };\n        const loadingMessage = {\n            id: (Date.now() + 1).toString(),\n            type: 'assistant',\n            content: isInvestmentRelated ? '분석을 시작하고 있어요...' : '답변을 준비하고 있어요...',\n            timestamp: new Date(),\n            status: 'sending',\n            isInvestmentRelated\n        };\n        setMessages([\n            userMessage,\n            loadingMessage\n        ]);\n        setInput('');\n        setIsLoading(true);\n        // 실제 분석 로직은 기존 handleSend와 동일\n        try {\n            await executeAnalysis(inputText, isInvestmentRelated, loadingMessage);\n        } finally{\n            isSendingRef.current = false;\n        }\n    };\n    // 분석 실행 로직을 분리\n    const executeAnalysis = async (inputText, isInvestmentRelated, loadingMessage)=>{\n        try {\n            var _response_body;\n            // 비투자 질문이면 백엔드 요청 없이 바로 거부 메시지 표시\n            if (!isInvestmentRelated) {\n                setMessages((prev)=>prev.map((msg)=>msg.id === loadingMessage.id ? {\n                            ...msg,\n                            content: \"죄송합니다. 저는 투자 분석 전문 AI입니다. 주식, 경제, 투자 관련 질문만 답변드릴 수 있어요. 관련 분야로 다시 질문해 주세요.\",\n                            status: 'success'\n                        } : msg));\n                setIsLoading(false);\n                return;\n            }\n            // 투자 관련 질문만 백엔드로 분석 요청\n            const apiBaseUrl = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:8000';\n            const response = await fetch(\"\".concat(apiBaseUrl, \"/analyze/stream\"), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    question: inputText,\n                    session_id: sessionId || undefined\n                })\n            });\n            if (!response.ok) {\n                throw new Error(\"HTTP \".concat(response.status, \": \").concat(response.statusText));\n            }\n            const reader = (_response_body = response.body) === null || _response_body === void 0 ? void 0 : _response_body.getReader();\n            if (!reader) {\n                throw new Error('스트림을 읽을 수 없습니다');\n            }\n            const decoder = new TextDecoder();\n            try {\n                while(true){\n                    const { done, value } = await reader.read();\n                    if (done) break;\n                    const chunk = decoder.decode(value, {\n                        stream: true\n                    });\n                    const lines = chunk.split('\\n');\n                    for (const line of lines){\n                        if (line.startsWith('data: ')) {\n                            try {\n                                const jsonStr = line.slice(6).trim();\n                                if (!jsonStr) continue;\n                                const data = JSON.parse(jsonStr);\n                                switch(data.type){\n                                    case 'start':\n                                        if (!sessionId && data.session_id) {\n                                            setSessionId(data.session_id);\n                                        }\n                                        break;\n                                    case 'step_update':\n                                        setMessages((prev)=>prev.map((msg)=>msg.id === loadingMessage.id ? {\n                                                    ...msg,\n                                                    content: \"\".concat(data.step, \" 단계 진행 중...\"),\n                                                    analysisStep: {\n                                                        step: data.step,\n                                                        message: \"\".concat(data.step, \" 단계 진행 중...\"),\n                                                        status: data.status || 'running'\n                                                    }\n                                                } : msg));\n                                        break;\n                                    case 'step_completed':\n                                        setMessages((prev)=>prev.map((msg)=>msg.id === loadingMessage.id ? {\n                                                    ...msg,\n                                                    analysisStep: {\n                                                        step: data.step,\n                                                        message: \"\".concat(data.step, \" 단계 완료\"),\n                                                        status: 'completed'\n                                                    }\n                                                } : msg));\n                                        break;\n                                    case 'final_response':\n                                        setMessages((prev)=>prev.map((msg)=>msg.id === loadingMessage.id ? {\n                                                    ...msg,\n                                                    content: data.response,\n                                                    status: 'success',\n                                                    usedMCPServers: data.used_servers ? {\n                                                        used_servers: data.used_servers,\n                                                        connected_servers: data.used_servers,\n                                                        available_tools: data.used_servers.length,\n                                                        total_servers: 6\n                                                    } : undefined\n                                                } : msg));\n                                        break;\n                                    case 'complete':\n                                        setIsLoading(false);\n                                        break;\n                                    case 'error':\n                                        throw new Error(data.error || \"알 수 없는 오류가 발생했습니다.\");\n                                }\n                            } catch (parseError) {\n                                console.warn('JSON 파싱 실패:', parseError, 'Line:', line);\n                            }\n                        }\n                    }\n                }\n            } finally{\n                reader.releaseLock();\n            }\n        } catch (error) {\n            console.error('스트리밍 실패:', error);\n            setMessages((prev)=>prev.map((msg)=>msg.id === loadingMessage.id ? {\n                        ...msg,\n                        content: \"죄송합니다. 서버와의 연결에 문제가 발생했습니다.\\n\\n\".concat(error instanceof Error ? error.message : '알 수 없는 오류가 발생했습니다.', \"\\n\\n잠시 후 다시 시도해주세요.\"),\n                        status: 'error'\n                    } : msg));\n            setIsLoading(false);\n        }\n    };\n    const handleSend = async ()=>{\n        if (!input.trim() || isLoading || isSendingRef.current) return;\n        isSendingRef.current = true;\n        const inputText = input.trim();\n        // 먼저 투자 관련 질문인지 검증\n        const validationResult = await validateQuestion(inputText);\n        const isInvestmentRelated = validationResult.is_investment_related;\n        const userMessage = {\n            id: Date.now().toString(),\n            type: 'user',\n            content: inputText,\n            timestamp: new Date(),\n            status: 'success'\n        };\n        const loadingMessage = {\n            id: (Date.now() + 1).toString(),\n            type: 'assistant',\n            content: isInvestmentRelated ? '분석을 시작하고 있어요...' : '답변을 준비하고 있어요...',\n            timestamp: new Date(),\n            status: 'sending',\n            isInvestmentRelated\n        };\n        setMessages((prev)=>[\n                ...prev,\n                userMessage,\n                loadingMessage\n            ]);\n        setInput('');\n        setIsLoading(true);\n        // 분석 실행\n        try {\n            await executeAnalysis(inputText, isInvestmentRelated, loadingMessage);\n        } finally{\n            isSendingRef.current = false;\n        }\n    };\n    // 새 채팅 시작\n    const handleNewChat = ()=>{\n        setMessages([]);\n        setInput('');\n        setSessionId(null);\n        // URL에서 쿼리 파라미터 제거\n        router.replace('/chat');\n    };\n    // 채팅 기록 지우기\n    const handleClear = ()=>{\n        if (window.confirm('대화 기록을 모두 지우시겠습니까?')) {\n            setMessages([]);\n            setSessionId(null);\n        }\n    };\n    // 채팅 내보내기\n    const handleExport = ()=>{\n        const exportData = {\n            timestamp: new Date().toISOString(),\n            messages: messages.map((msg)=>({\n                    type: msg.type,\n                    content: msg.content,\n                    timestamp: msg.timestamp.toISOString()\n                }))\n        };\n        const blob = new Blob([\n            JSON.stringify(exportData, null, 2)\n        ], {\n            type: 'application/json'\n        });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = \"chat-export-\".concat(new Date().toISOString().split('T')[0], \".json\");\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n    };\n    // 메시지 복사 완료 알림\n    const handleMessageCopy = ()=>{\n        console.log('메시지가 복사되었습니다.');\n    };\n    // 메시지 재생성\n    const handleMessageRegenerate = (messageId)=>{\n        const lastUserMessage = messages.slice().reverse().find((msg)=>msg.type === 'user');\n        if (lastUserMessage) {\n            setInput(lastUserMessage.content);\n            const messageIndex = messages.findIndex((msg)=>msg.id === messageId);\n            if (messageIndex > 0) {\n                setMessages((prev)=>prev.slice(0, messageIndex));\n            }\n        }\n    };\n    // 메시지 피드백\n    const handleMessageFeedback = (messageId, type)=>{\n        console.log(\"메시지 \".concat(messageId, \"에 \").concat(type, \" 피드백\"));\n    };\n    // 메인 페이지로 돌아가기\n    const handleBackToHome = ()=>{\n        router.push('/');\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_chat_container__WEBPACK_IMPORTED_MODULE_1__.ChatContainer, {\n        messages: messages,\n        input: input,\n        isLoading: isLoading,\n        onInputChange: setInput,\n        onSend: handleSend,\n        onMessageCopy: handleMessageCopy,\n        onMessageRegenerate: handleMessageRegenerate,\n        onMessageFeedback: handleMessageFeedback,\n        onNewChat: handleNewChat,\n        onClear: handleClear,\n        onExport: handleExport,\n        onBackToHome: handleBackToHome\n    }, void 0, false, {\n        fileName: \"D:\\\\Python\\\\AI_MCP_A2A\\\\frontend\\\\app\\\\chat\\\\page.tsx\",\n        lineNumber: 383,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatPageContent, \"oLOVUFkLBOecMCsJHJnIlRg7otQ=\", false, function() {\n    return [\n        _hooks_useInvestmentValidation__WEBPACK_IMPORTED_MODULE_2__.useInvestmentValidation,\n        next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter,\n        next_navigation__WEBPACK_IMPORTED_MODULE_3__.useSearchParams\n    ];\n});\n_c1 = ChatPageContent;\nvar _c, _c1;\n$RefreshReg$(_c, \"ChatPage\");\n$RefreshReg$(_c1, \"ChatPageContent\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L19OX0UvLi9hcHAvY2hhdC9wYWdlLnRzeD84ZjU5Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xyXG5cclxuaW1wb3J0IHsgQ2hhdENvbnRhaW5lciB9IGZyb20gJ0AvY29tcG9uZW50cy9jaGF0L2NoYXQtY29udGFpbmVyJ1xyXG5pbXBvcnQgeyB1c2VJbnZlc3RtZW50VmFsaWRhdGlvbiB9IGZyb20gJ0AvaG9va3MvdXNlSW52ZXN0bWVudFZhbGlkYXRpb24nXHJcbmltcG9ydCB7IHVzZVJvdXRlciwgdXNlU2VhcmNoUGFyYW1zIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJ1xyXG5pbXBvcnQgeyBTdXNwZW5zZSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXHJcblxyXG5pbnRlcmZhY2UgTWVzc2FnZSB7XHJcbiAgaWQ6IHN0cmluZ1xyXG4gIHR5cGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnXHJcbiAgY29udGVudDogc3RyaW5nXHJcbiAgdGltZXN0YW1wOiBEYXRlXHJcbiAgc3RhdHVzPzogJ3NlbmRpbmcnIHwgJ3N1Y2Nlc3MnIHwgJ2Vycm9yJ1xyXG4gIGRhdGE/OiBhbnlcclxuICBtY3BTdGF0dXM/OiB7XHJcbiAgICBjb25uZWN0ZWRfc2VydmVyczogc3RyaW5nW11cclxuICAgIGF2YWlsYWJsZV90b29sczogbnVtYmVyXHJcbiAgICB0b3RhbF9zZXJ2ZXJzOiBudW1iZXJcclxuICB9XHJcbiAgYW5hbHlzaXNTdGVwPzoge1xyXG4gICAgc3RlcDogc3RyaW5nXHJcbiAgICBtZXNzYWdlOiBzdHJpbmdcclxuICB9XHJcbiAgdG9vbFN0YXR1c2VzPzoge1xyXG4gICAgdG9vbDogc3RyaW5nXHJcbiAgICBhY3Rpb246IHN0cmluZ1xyXG4gICAgc3RhdHVzOiAncnVubmluZycgfCAnY29tcGxldGVkJyB8ICdlcnJvcidcclxuICAgIGVycm9yPzogc3RyaW5nXHJcbiAgfVtdXHJcbiAgaXNJbnZlc3RtZW50UmVsYXRlZD86IGJvb2xlYW5cclxuICB1c2VkTUNQU2VydmVycz86IHtcclxuICAgIHVzZWRfc2VydmVyczogc3RyaW5nW11cclxuICAgIGNvbm5lY3RlZF9zZXJ2ZXJzOiBzdHJpbmdbXVxyXG4gICAgYXZhaWxhYmxlX3Rvb2xzOiBudW1iZXJcclxuICAgIHRvdGFsX3NlcnZlcnM6IG51bWJlclxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2hhdFBhZ2UoKSB7XHJcbiAgcmV0dXJuIChcclxuICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17bnVsbH0+XHJcbiAgICAgIDxDaGF0UGFnZUNvbnRlbnQgLz5cclxuICAgIDwvU3VzcGVuc2U+XHJcbiAgKVxyXG59XHJcblxyXG5mdW5jdGlvbiBDaGF0UGFnZUNvbnRlbnQoKSB7XHJcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxNZXNzYWdlW10+KFtdKVxyXG4gIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUoJycpXHJcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxyXG4gIGNvbnN0IFtzZXNzaW9uSWQsIHNldFNlc3Npb25JZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxyXG4gIGNvbnN0IGlzU2VuZGluZ1JlZiA9IHVzZVJlZihmYWxzZSlcclxuICBjb25zdCB7IHZhbGlkYXRlUXVlc3Rpb24gfSA9IHVzZUludmVzdG1lbnRWYWxpZGF0aW9uKClcclxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKVxyXG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHVzZVNlYXJjaFBhcmFtcygpXHJcblxyXG4gIC8vIFVSTCDtjIzrnbzrr7jthLDsl5DshJwg7LSI6riwIOyniOusuCDqsIDsoLjsmKTquLAg67CPIOyekOuPmSDsi6TtlolcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgaW5pdGlhbFF1ZXN0aW9uID0gc2VhcmNoUGFyYW1zLmdldCgncScpXHJcbiAgICBpZiAoaW5pdGlhbFF1ZXN0aW9uICYmICFpc0xvYWRpbmcgJiYgbWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnN0IHF1ZXN0aW9uID0gZGVjb2RlVVJJQ29tcG9uZW50KGluaXRpYWxRdWVzdGlvbilcclxuICAgICAgc2V0SW5wdXQocXVlc3Rpb24pXHJcbiAgICAgIFxyXG4gICAgICAvLyDsnpDrj5nsnLzroZwg7KeI66y4IOyLpO2WiVxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBoYW5kbGVBdXRvU2VuZChxdWVzdGlvbilcclxuICAgICAgfSwgMTAwKVxyXG4gICAgfVxyXG4gIH0sIFtzZWFyY2hQYXJhbXMsIGlzTG9hZGluZywgbWVzc2FnZXMubGVuZ3RoXSlcclxuXHJcbiAgLy8g7J6Q64+ZIOyniOusuCDsi6Ttlokg7ZWo7IiYXHJcbiAgY29uc3QgaGFuZGxlQXV0b1NlbmQgPSBhc3luYyAocXVlc3Rpb246IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKCFxdWVzdGlvbi50cmltKCkgfHwgaXNMb2FkaW5nIHx8IGlzU2VuZGluZ1JlZi5jdXJyZW50KSByZXR1cm5cclxuXHJcbiAgICBpc1NlbmRpbmdSZWYuY3VycmVudCA9IHRydWVcclxuICAgIGNvbnN0IGlucHV0VGV4dCA9IHF1ZXN0aW9uLnRyaW0oKVxyXG4gICAgXHJcbiAgICAvLyDrqLzsoIAg7Yis7J6QIOq0gOugqCDsp4jrrLjsnbjsp4Ag6rKA7KadXHJcbiAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gYXdhaXQgdmFsaWRhdGVRdWVzdGlvbihpbnB1dFRleHQpXHJcbiAgICBjb25zdCBpc0ludmVzdG1lbnRSZWxhdGVkID0gdmFsaWRhdGlvblJlc3VsdC5pc19pbnZlc3RtZW50X3JlbGF0ZWRcclxuXHJcbiAgICBjb25zdCB1c2VyTWVzc2FnZTogTWVzc2FnZSA9IHtcclxuICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcclxuICAgICAgdHlwZTogJ3VzZXInLFxyXG4gICAgICBjb250ZW50OiBpbnB1dFRleHQsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgc3RhdHVzOiAnc3VjY2VzcydcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsb2FkaW5nTWVzc2FnZTogTWVzc2FnZSA9IHtcclxuICAgICAgaWQ6IChEYXRlLm5vdygpICsgMSkudG9TdHJpbmcoKSxcclxuICAgICAgdHlwZTogJ2Fzc2lzdGFudCcsXHJcbiAgICAgIGNvbnRlbnQ6IGlzSW52ZXN0bWVudFJlbGF0ZWQgPyAn67aE7ISd7J2EIOyLnOyeke2VmOqzoCDsnojslrTsmpQuLi4nIDogJ+uLteuzgOydhCDspIDruYTtlZjqs6Ag7J6I7Ja07JqULi4uJyxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICBzdGF0dXM6ICdzZW5kaW5nJyxcclxuICAgICAgaXNJbnZlc3RtZW50UmVsYXRlZFxyXG4gICAgfVxyXG5cclxuICAgIHNldE1lc3NhZ2VzKFt1c2VyTWVzc2FnZSwgbG9hZGluZ01lc3NhZ2VdKVxyXG4gICAgc2V0SW5wdXQoJycpXHJcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSlcclxuXHJcbiAgICAvLyDsi6TsoJwg67aE7ISdIOuhnOyngeydgCDquLDsobQgaGFuZGxlU2VuZOyZgCDrj5nsnbxcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGV4ZWN1dGVBbmFseXNpcyhpbnB1dFRleHQsIGlzSW52ZXN0bWVudFJlbGF0ZWQsIGxvYWRpbmdNZXNzYWdlKVxyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgaXNTZW5kaW5nUmVmLmN1cnJlbnQgPSBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g67aE7ISdIOyLpO2WiSDroZzsp4HsnYQg67aE66asXHJcbiAgY29uc3QgZXhlY3V0ZUFuYWx5c2lzID0gYXN5bmMgKGlucHV0VGV4dDogc3RyaW5nLCBpc0ludmVzdG1lbnRSZWxhdGVkOiBib29sZWFuLCBsb2FkaW5nTWVzc2FnZTogTWVzc2FnZSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g67mE7Yis7J6QIOyniOusuOydtOuptCDrsLHsl5Trk5wg7JqU7LKtIOyXhuydtCDrsJTroZwg6rGw67aAIOuplOyLnOyngCDtkZzsi5xcclxuICAgICAgaWYgKCFpc0ludmVzdG1lbnRSZWxhdGVkKSB7XHJcbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBcclxuICAgICAgICAgIHByZXYubWFwKG1zZyA9PiBcclxuICAgICAgICAgICAgbXNnLmlkID09PSBsb2FkaW5nTWVzc2FnZS5pZCBcclxuICAgICAgICAgICAgICA/IHsgXHJcbiAgICAgICAgICAgICAgICAgIC4uLm1zZywgXHJcbiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwi7KOE7Iah7ZWp64uI64ukLiDsoIDripQg7Yis7J6QIOu2hOyEnSDsoITrrLggQUnsnoXri4jri6QuIOyjvOyLnSwg6rK97KCcLCDtiKzsnpAg6rSA66CoIOyniOusuOunjCDri7Xrs4Drk5zrprQg7IiYIOyeiOyWtOyalC4g6rSA66CoIOu2hOyVvOuhnCDri6Tsi5wg7KeI66y47ZW0IOyjvOyEuOyalC5cIixcclxuICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycgYXMgY29uc3RcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA6IG1zZ1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIO2IrOyekCDqtIDroKgg7KeI66y466eMIOuwseyXlOuTnOuhnCDrtoTshJ0g7JqU7LKtXHJcbiAgICAgIGNvbnN0IGFwaUJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfQkFTRV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCdcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHthcGlCYXNlVXJsfS9hbmFseXplL3N0cmVhbWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgcXVlc3Rpb246IGlucHV0VGV4dCxcclxuICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb25JZCB8fCB1bmRlZmluZWRcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5Py5nZXRSZWFkZXIoKVxyXG4gICAgICBpZiAoIXJlYWRlcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7Iqk7Yq466a87J2EIOydveydhCDsiJgg7JeG7Iq164uI64ukJylcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpXHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpXHJcbiAgICAgICAgICBpZiAoZG9uZSkgYnJlYWtcclxuXHJcbiAgICAgICAgICBjb25zdCBjaHVuayA9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KVxyXG4gICAgICAgICAgY29uc3QgbGluZXMgPSBjaHVuay5zcGxpdCgnXFxuJylcclxuXHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnZGF0YTogJykpIHtcclxuICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QganNvblN0ciA9IGxpbmUuc2xpY2UoNikudHJpbSgpXHJcbiAgICAgICAgICAgICAgICBpZiAoIWpzb25TdHIpIGNvbnRpbnVlXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGpzb25TdHIpXHJcblxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgY2FzZSAnc3RhcnQnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2Vzc2lvbklkICYmIGRhdGEuc2Vzc2lvbl9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2V0U2Vzc2lvbklkKGRhdGEuc2Vzc2lvbl9pZClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0ZXBfdXBkYXRlJzpcclxuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJldi5tYXAobXNnID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtc2cuaWQgPT09IGxvYWRpbmdNZXNzYWdlLmlkIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8geyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ubXNnLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogYCR7ZGF0YS5zdGVwfSDri6jqs4Qg7KeE7ZaJIOykkS4uLmAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuYWx5c2lzU3RlcDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXA6IGRhdGEuc3RlcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgJHtkYXRhLnN0ZXB9IOuLqOqzhCDsp4Ttlokg7KSRLi4uYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzIHx8ICdydW5uaW5nJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBtc2dcclxuICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0ZXBfY29tcGxldGVkJzpcclxuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJldi5tYXAobXNnID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtc2cuaWQgPT09IGxvYWRpbmdNZXNzYWdlLmlkIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8geyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ubXNnLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5hbHlzaXNTdGVwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcDogZGF0YS5zdGVwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGAke2RhdGEuc3RlcH0g64uo6rOEIOyZhOujjGAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBtc2dcclxuICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbmFsX3Jlc3BvbnNlJzpcclxuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJldi5tYXAobXNnID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtc2cuaWQgPT09IGxvYWRpbmdNZXNzYWdlLmlkIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8geyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ubXNnLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZGF0YS5yZXNwb25zZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRNQ1BTZXJ2ZXJzOiBkYXRhLnVzZWRfc2VydmVycyA/IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VkX3NlcnZlcnM6IGRhdGEudXNlZF9zZXJ2ZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9zZXJ2ZXJzOiBkYXRhLnVzZWRfc2VydmVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVfdG9vbHM6IGRhdGEudXNlZF9zZXJ2ZXJzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbF9zZXJ2ZXJzOiA2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1zZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgICAgICAgY2FzZSAnY29tcGxldGUnOlxyXG4gICAgICAgICAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgICAgICAgY2FzZSAnZXJyb3InOlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yIHx8IFwi7JWMIOyImCDsl4bripQg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC5cIilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0pTT04g7YyM7IuxIOyLpO2MqDonLCBwYXJzZUVycm9yLCAnTGluZTonLCBsaW5lKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfsiqTtirjrpqzrsI0g7Iuk7YyoOicsIGVycm9yKVxyXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFxyXG4gICAgICAgIHByZXYubWFwKG1zZyA9PiBcclxuICAgICAgICAgIG1zZy5pZCA9PT0gbG9hZGluZ01lc3NhZ2UuaWQgXHJcbiAgICAgICAgICAgID8geyBcclxuICAgICAgICAgICAgICAgIC4uLm1zZywgXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBg7KOE7Iah7ZWp64uI64ukLiDshJzrsoTsmYDsnZgg7Jew6rKw7JeQIOusuOygnOqwgCDrsJzsg53tlojsirXri4jri6QuXFxuXFxuJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfslYwg7IiYIOyXhuuKlCDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLid9XFxuXFxu7J6g7IucIO2bhCDri6Tsi5wg7Iuc64+E7ZW07KO87IS47JqULmAsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicgYXMgY29uc3QgXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA6IG1zZ1xyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBoYW5kbGVTZW5kID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFpbnB1dC50cmltKCkgfHwgaXNMb2FkaW5nIHx8IGlzU2VuZGluZ1JlZi5jdXJyZW50KSByZXR1cm5cclxuXHJcbiAgICBpc1NlbmRpbmdSZWYuY3VycmVudCA9IHRydWVcclxuICAgIGNvbnN0IGlucHV0VGV4dCA9IGlucHV0LnRyaW0oKVxyXG4gICAgXHJcbiAgICAvLyDrqLzsoIAg7Yis7J6QIOq0gOugqCDsp4jrrLjsnbjsp4Ag6rKA7KadXHJcbiAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gYXdhaXQgdmFsaWRhdGVRdWVzdGlvbihpbnB1dFRleHQpXHJcbiAgICBjb25zdCBpc0ludmVzdG1lbnRSZWxhdGVkID0gdmFsaWRhdGlvblJlc3VsdC5pc19pbnZlc3RtZW50X3JlbGF0ZWRcclxuXHJcbiAgICBjb25zdCB1c2VyTWVzc2FnZTogTWVzc2FnZSA9IHtcclxuICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcclxuICAgICAgdHlwZTogJ3VzZXInLFxyXG4gICAgICBjb250ZW50OiBpbnB1dFRleHQsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgc3RhdHVzOiAnc3VjY2VzcydcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsb2FkaW5nTWVzc2FnZTogTWVzc2FnZSA9IHtcclxuICAgICAgaWQ6IChEYXRlLm5vdygpICsgMSkudG9TdHJpbmcoKSxcclxuICAgICAgdHlwZTogJ2Fzc2lzdGFudCcsXHJcbiAgICAgIGNvbnRlbnQ6IGlzSW52ZXN0bWVudFJlbGF0ZWQgPyAn67aE7ISd7J2EIOyLnOyeke2VmOqzoCDsnojslrTsmpQuLi4nIDogJ+uLteuzgOydhCDspIDruYTtlZjqs6Ag7J6I7Ja07JqULi4uJyxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICBzdGF0dXM6ICdzZW5kaW5nJyxcclxuICAgICAgaXNJbnZlc3RtZW50UmVsYXRlZFxyXG4gICAgfVxyXG5cclxuICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHVzZXJNZXNzYWdlLCBsb2FkaW5nTWVzc2FnZV0pXHJcbiAgICBzZXRJbnB1dCgnJylcclxuICAgIHNldElzTG9hZGluZyh0cnVlKVxyXG5cclxuICAgIC8vIOu2hOyEnSDsi6TtlolcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGV4ZWN1dGVBbmFseXNpcyhpbnB1dFRleHQsIGlzSW52ZXN0bWVudFJlbGF0ZWQsIGxvYWRpbmdNZXNzYWdlKVxyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgaXNTZW5kaW5nUmVmLmN1cnJlbnQgPSBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG5cclxuICAvLyDsg4gg7LGE7YyFIOyLnOyekVxyXG4gIGNvbnN0IGhhbmRsZU5ld0NoYXQgPSAoKSA9PiB7XHJcbiAgICBzZXRNZXNzYWdlcyhbXSlcclxuICAgIHNldElucHV0KCcnKVxyXG4gICAgc2V0U2Vzc2lvbklkKG51bGwpXHJcbiAgICAvLyBVUkzsl5DshJwg7L+866asIO2MjOudvOuvuO2EsCDsoJzqsbBcclxuICAgIHJvdXRlci5yZXBsYWNlKCcvY2hhdCcpXHJcbiAgfVxyXG5cclxuICAvLyDssYTtjIUg6riw66GdIOyngOyasOq4sFxyXG4gIGNvbnN0IGhhbmRsZUNsZWFyID0gKCkgPT4ge1xyXG4gICAgaWYgKHdpbmRvdy5jb25maXJtKCfrjIDtmZQg6riw66Gd7J2EIOuqqOuRkCDsp4DsmrDsi5zqsqDsirXri4jquYw/JykpIHtcclxuICAgICAgc2V0TWVzc2FnZXMoW10pXHJcbiAgICAgIHNldFNlc3Npb25JZChudWxsKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g7LGE7YyFIOuCtOuztOuCtOq4sFxyXG4gIGNvbnN0IGhhbmRsZUV4cG9ydCA9ICgpID0+IHtcclxuICAgIGNvbnN0IGV4cG9ydERhdGEgPSB7XHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBtZXNzYWdlczogbWVzc2FnZXMubWFwKG1zZyA9PiAoe1xyXG4gICAgICAgIHR5cGU6IG1zZy50eXBlLFxyXG4gICAgICAgIGNvbnRlbnQ6IG1zZy5jb250ZW50LFxyXG4gICAgICAgIHRpbWVzdGFtcDogbXNnLnRpbWVzdGFtcC50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KGV4cG9ydERhdGEsIG51bGwsIDIpXSwge1xyXG4gICAgICB0eXBlOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH0pXHJcbiAgICBcclxuICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYilcclxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuICAgIGEuaHJlZiA9IHVybFxyXG4gICAgYS5kb3dubG9hZCA9IGBjaGF0LWV4cG9ydC0ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfS5qc29uYFxyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKVxyXG4gICAgYS5jbGljaygpXHJcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpXHJcbiAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybClcclxuICB9XHJcblxyXG4gIC8vIOuplOyLnOyngCDrs7Xsgqwg7JmE66OMIOyVjOumvFxyXG4gIGNvbnN0IGhhbmRsZU1lc3NhZ2VDb3B5ID0gKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ+uplOyLnOyngOqwgCDrs7XsgqzrkJjsl4jsirXri4jri6QuJylcclxuICB9XHJcblxyXG4gIC8vIOuplOyLnOyngCDsnqzsg53shLFcclxuICBjb25zdCBoYW5kbGVNZXNzYWdlUmVnZW5lcmF0ZSA9IChtZXNzYWdlSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgbGFzdFVzZXJNZXNzYWdlID0gbWVzc2FnZXNcclxuICAgICAgLnNsaWNlKClcclxuICAgICAgLnJldmVyc2UoKVxyXG4gICAgICAuZmluZChtc2cgPT4gbXNnLnR5cGUgPT09ICd1c2VyJylcclxuICAgIFxyXG4gICAgaWYgKGxhc3RVc2VyTWVzc2FnZSkge1xyXG4gICAgICBzZXRJbnB1dChsYXN0VXNlck1lc3NhZ2UuY29udGVudClcclxuICAgICAgY29uc3QgbWVzc2FnZUluZGV4ID0gbWVzc2FnZXMuZmluZEluZGV4KG1zZyA9PiBtc2cuaWQgPT09IG1lc3NhZ2VJZClcclxuICAgICAgaWYgKG1lc3NhZ2VJbmRleCA+IDApIHtcclxuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYuc2xpY2UoMCwgbWVzc2FnZUluZGV4KSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g66mU7Iuc7KeAIO2UvOuTnOuwsVxyXG4gIGNvbnN0IGhhbmRsZU1lc3NhZ2VGZWVkYmFjayA9IChtZXNzYWdlSWQ6IHN0cmluZywgdHlwZTogJ3Bvc2l0aXZlJyB8ICduZWdhdGl2ZScpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGDrqZTsi5zsp4AgJHttZXNzYWdlSWR97JeQICR7dHlwZX0g7ZS865Oc67CxYClcclxuICB9XHJcblxyXG5cclxuXHJcbiAgLy8g66mU7J24IO2OmOydtOyngOuhnCDrj4zslYTqsIDquLBcclxuICBjb25zdCBoYW5kbGVCYWNrVG9Ib21lID0gKCkgPT4ge1xyXG4gICAgcm91dGVyLnB1c2goJy8nKVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxDaGF0Q29udGFpbmVyXHJcbiAgICAgIG1lc3NhZ2VzPXttZXNzYWdlc31cclxuICAgICAgaW5wdXQ9e2lucHV0fVxyXG4gICAgICBpc0xvYWRpbmc9e2lzTG9hZGluZ31cclxuICAgICAgb25JbnB1dENoYW5nZT17c2V0SW5wdXR9XHJcbiAgICAgIG9uU2VuZD17aGFuZGxlU2VuZH1cclxuICAgICAgb25NZXNzYWdlQ29weT17aGFuZGxlTWVzc2FnZUNvcHl9XHJcbiAgICAgIG9uTWVzc2FnZVJlZ2VuZXJhdGU9e2hhbmRsZU1lc3NhZ2VSZWdlbmVyYXRlfVxyXG4gICAgICBvbk1lc3NhZ2VGZWVkYmFjaz17aGFuZGxlTWVzc2FnZUZlZWRiYWNrfVxyXG4gICAgICBvbk5ld0NoYXQ9e2hhbmRsZU5ld0NoYXR9XHJcbiAgICAgIG9uQ2xlYXI9e2hhbmRsZUNsZWFyfVxyXG4gICAgICBvbkV4cG9ydD17aGFuZGxlRXhwb3J0fVxyXG4gICAgICBvbkJhY2tUb0hvbWU9e2hhbmRsZUJhY2tUb0hvbWV9XHJcbiAgICAvPlxyXG4gIClcclxufVxyXG4iXSwibmFtZXMiOlsiQ2hhdENvbnRhaW5lciIsInVzZUludmVzdG1lbnRWYWxpZGF0aW9uIiwidXNlUm91dGVyIiwidXNlU2VhcmNoUGFyYW1zIiwiU3VzcGVuc2UiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsIkNoYXRQYWdlIiwiZmFsbGJhY2siLCJDaGF0UGFnZUNvbnRlbnQiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaW5wdXQiLCJzZXRJbnB1dCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsInNlc3Npb25JZCIsInNldFNlc3Npb25JZCIsImlzU2VuZGluZ1JlZiIsInZhbGlkYXRlUXVlc3Rpb24iLCJyb3V0ZXIiLCJzZWFyY2hQYXJhbXMiLCJpbml0aWFsUXVlc3Rpb24iLCJnZXQiLCJsZW5ndGgiLCJxdWVzdGlvbiIsImRlY29kZVVSSUNvbXBvbmVudCIsInNldFRpbWVvdXQiLCJoYW5kbGVBdXRvU2VuZCIsInRyaW0iLCJjdXJyZW50IiwiaW5wdXRUZXh0IiwidmFsaWRhdGlvblJlc3VsdCIsImlzSW52ZXN0bWVudFJlbGF0ZWQiLCJpc19pbnZlc3RtZW50X3JlbGF0ZWQiLCJ1c2VyTWVzc2FnZSIsImlkIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwidHlwZSIsImNvbnRlbnQiLCJ0aW1lc3RhbXAiLCJzdGF0dXMiLCJsb2FkaW5nTWVzc2FnZSIsImV4ZWN1dGVBbmFseXNpcyIsInJlc3BvbnNlIiwicHJldiIsIm1hcCIsIm1zZyIsImFwaUJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX0JBU0VfVVJMIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXNzaW9uX2lkIiwidW5kZWZpbmVkIiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJyZWFkZXIiLCJnZXRSZWFkZXIiLCJkZWNvZGVyIiwiVGV4dERlY29kZXIiLCJkb25lIiwidmFsdWUiLCJyZWFkIiwiY2h1bmsiLCJkZWNvZGUiLCJzdHJlYW0iLCJsaW5lcyIsInNwbGl0IiwibGluZSIsInN0YXJ0c1dpdGgiLCJqc29uU3RyIiwic2xpY2UiLCJkYXRhIiwicGFyc2UiLCJzdGVwIiwiYW5hbHlzaXNTdGVwIiwibWVzc2FnZSIsInVzZWRNQ1BTZXJ2ZXJzIiwidXNlZF9zZXJ2ZXJzIiwiY29ubmVjdGVkX3NlcnZlcnMiLCJhdmFpbGFibGVfdG9vbHMiLCJ0b3RhbF9zZXJ2ZXJzIiwiZXJyb3IiLCJwYXJzZUVycm9yIiwiY29uc29sZSIsIndhcm4iLCJyZWxlYXNlTG9jayIsImhhbmRsZVNlbmQiLCJoYW5kbGVOZXdDaGF0IiwicmVwbGFjZSIsImhhbmRsZUNsZWFyIiwid2luZG93IiwiY29uZmlybSIsImhhbmRsZUV4cG9ydCIsImV4cG9ydERhdGEiLCJ0b0lTT1N0cmluZyIsImJsb2IiLCJCbG9iIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJkb3dubG9hZCIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZW1vdmVDaGlsZCIsInJldm9rZU9iamVjdFVSTCIsImhhbmRsZU1lc3NhZ2VDb3B5IiwibG9nIiwiaGFuZGxlTWVzc2FnZVJlZ2VuZXJhdGUiLCJtZXNzYWdlSWQiLCJsYXN0VXNlck1lc3NhZ2UiLCJyZXZlcnNlIiwiZmluZCIsIm1lc3NhZ2VJbmRleCIsImZpbmRJbmRleCIsImhhbmRsZU1lc3NhZ2VGZWVkYmFjayIsImhhbmRsZUJhY2tUb0hvbWUiLCJwdXNoIiwib25JbnB1dENoYW5nZSIsIm9uU2VuZCIsIm9uTWVzc2FnZUNvcHkiLCJvbk1lc3NhZ2VSZWdlbmVyYXRlIiwib25NZXNzYWdlRmVlZGJhY2siLCJvbk5ld0NoYXQiLCJvbkNsZWFyIiwib25FeHBvcnQiLCJvbkJhY2tUb0hvbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/chat/page.tsx\n"));

/***/ })

});